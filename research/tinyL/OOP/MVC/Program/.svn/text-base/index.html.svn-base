<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"><meta http-equiv="Content-Style-Type" content="text/css"><meta http-equiv="Content-Script-Type" content="text/javascript"><meta name="keywords" content="Aoki,Atsushi,Smalltalk,Smalltalker,Program,Programmer,Object,Oriented,Programming"><meta name="description" content="ƒvƒƒWƒFƒNƒg‰‰K‚Ìƒz[ƒ€ƒy[ƒW"><meta name="author" content="AOKI Atsushi"><link rev="made" href="mailto:atsushi@cc.kyoto-su.ac.jp"><link rel="index" href="index-j.html"><style type="text/css"><!--body {  background-color : #ffffff;  margin : 20px;  padding : 10px;  font-family : serif;  font-size : 10pt;}a {  text-decoration : underline;  color : #000000;}a:link {  background-color : #ffddbb;}a:visited {  background-color : #ccffcc;}a:hover {  background-color : #dddddd;}a:active {  background-color : #dddddd;}div.belt {  background-color : #eeeeee;  padding : 0px 4px;}div.belt-yellow {  background-color : #ffffcc;  padding : 0px 4px;}div.belt-blue {  background-color : #ddeeff;  padding : 0px 4px;}div.right-small {  text-align : right;  font-size : 8pt;}img.border {  border-width : 1px;  border-color : #000000;  vertical-align : middle;}img.borderless {  border-width : 0px;  vertical-align : middle;}p.belt {  background-color : #ffeedd;  padding : 4px 8px;}p.belt-blue {  background-color : #ddeeff;  padding : 4px 8px;}pre.belt {  background-color : #ddeeff;  padding : 4px 8px;}pre.belt-yellow {  background-color : #ffffcc;  padding : 4px 8px;}table {  border-style : solid;  border-width : 0px;  border-color : #000000;  font-family : serif;  font-size : 10pt;}table.profile {  border-style : solid;  border-width : 0px;  border-color : #000000;  font-family : serif;  font-size : 10pt;  margin-top : 8px;  margin-left : 8px;  margin-right : 8px;  margin-bottom : 8px;}table.belt {  border-style : solid;  border-width : 0px;  border-color : #000000;  background-color : #ffeedd;  padding : 0px 0px;  width : 100%;}table.content {  border-style : solid;  border-width : 0px;  border-color : #000000;  padding : 2px 4px;}table.font-fixed {  border-style : solid;  border-width : 0px;  border-color : #000000;  padding : 2px 4px;  font-family : monospace;}table.nest {  border-style : solid;  border-width : 0px;  border-color : #000000;  padding : 0px 0px;}td {  padding : 0px 0px;  vertical-align : middle;}td.center {  text-align : center;}td.center-half {  text-align : center;  width : 50%;  font-size : 8pt;}td.center-small {  text-align : center;  font-size : 8pt;  padding : 0px 4px;}td.center-small-nopadding {  text-align : center;  font-size : 8pt;  padding : 0px 0px;}td.center-white {  text-align : center;  background-color : #ffffff;}td.center-small-white {  text-align : center;  font-size : 8pt;  background-color : #ffffff;}td.center-border1 {  text-align : center;  vertical-align : middle;  empty-cells : show;  border-style : solid;  border-width : 1px;  border-color : #ffc080;  width : 22px;  height : 22px;}td.left-small {  text-align : left;  font-size : 8pt;  padding : 0px 4px;}td.left-small-white {  text-align : left;  font-size : 8pt;  padding : 0px 4px;  background-color : #ffffff;}td.right-small {  text-align : right;  font-size : 8pt;  padding : 0px 4px;}td.right-small-white {  text-align : right;  font-size : 8pt;  padding : 0px 4px;  background-color : #ffffff;}th {  padding : 0px 0px;  vertical-align : middle;}#menu {  margin: 0px 0px 0px 0px;  padding: 0px;  height: 32px;}#menu ul {  margin: 0px;  padding: 0px;  list-style: none;  text-align: center;  clear: both;}#menu li {  margin: 0px 5px 0px 0px;  padding: 0px;  float: left;}#menu a {  display: block;  padding: 2px 4px;  text-decoration: none;  margin: 0px;  font-weight: bold;  background: #FFFFFF;  color: #333333;  border: 1px solid #666666;}#menu a:hover {  display: block;  padding: 2px 4px;  border-bottom: 1px solid #000000;  text-decoration: none;  background: #FFCC66;}#menu .current {  background-color: #F45F57;  font-weight: bold;  color: #FFFFFF;  border: 1px solid #333333;}--></style><title>ƒvƒƒWƒFƒNƒg‰‰KuModel-View-ControllervƒvƒƒOƒ‰ƒ€</title></head><body><div id="menu"><ul>  <li><a href="../index.html">ƒz[ƒ€</a>  <li><a href="../Requirement/index.html">—v‹d—l‘</a>  <li><a href="../DevelopmentPlan/index.html">ŠJ”­Œv‰æ‘</a>  <li><a href="../BasicDesign/index.html">Šî–{İŒv‘</a>  <li><a href="../DetailDesign/index.html">Ú×İŒv‘</a>  <li><a href="../TestSpecification/index.html">ƒeƒXƒgd—l‘</a>  <li><a href="../TestResult/index.html">ƒeƒXƒgŒ‹‰Ê</a>  <li><a href="../DevelopmentResult/index.html">ŠJ”­ÀÑ</a>  <li><a href="../Program/index.html" class="current">ƒvƒƒOƒ‰ƒ€</a>  <li><a href="../Manual/index.html">ƒ}ƒjƒ…ƒAƒ‹</a></ul></div><hr><h2>ƒvƒƒWƒFƒNƒg‰‰KuModel-View-ControllervƒvƒƒOƒ‰ƒ€</h2><ul>  <li><a href="#Example">Example</a>iƒƒCƒ“ƒNƒ‰ƒXj  <li><a href="#Model">Model</a>iƒ‚ƒfƒ‹j  <li><a href="#View">View</a>iƒrƒ…[j  <li><a href="#Controller">Controller</a>iƒRƒ“ƒgƒ[ƒ‰j</ul><ul>  <li><a href="#mvc.mf">mvc.mf</a>iƒ}ƒjƒtƒFƒXƒgƒtƒ@ƒCƒ‹j  <li><a href="#Makefile">Makefile</a>iƒƒCƒNƒtƒ@ƒCƒ‹j  <li><a href="#build.xml">build.xml</a>iƒrƒ‹ƒhƒtƒ@ƒCƒ‹j</ul><ul>  <li><a href="#Makefile.old">Makefile.old</a>iŒÃ‚¢ƒƒCƒNƒtƒ@ƒCƒ‹j</ul><div class="belt"><h3><a name="Example" href="../TestSpecification/index.html#Example">ExampleiƒƒCƒ“ƒNƒ‰ƒXj</a></h3></div><pre>package mvc;import java.awt.Dimension;import java.awt.Rectangle;import java.awt.Robot;import java.awt.Toolkit;import java.awt.image.BufferedImage;import javax.swing.JFrame;/** * —á‘èƒvƒƒOƒ‰ƒ€B */public class Example extends Object{        /**         * ‰æ–Ê‚ğƒLƒƒƒvƒ`ƒƒ‚µ‚Ä‰æ‘œ‰»‚µAƒrƒ…[‚ÆƒRƒ“ƒgƒ[ƒ‰‚Ì3‚Â‚ÌƒyƒAiMVC-1, MVC-2, MVC-3‚ÌƒEƒBƒ“ƒhƒE‚½‚¿j‚©‚ç1‚Â‚Ìƒ‚ƒfƒ‹‚ğŠÏ‘ª‚µ‚Ä‚¢‚éó‘Ô‚ğì‚èo‚·B         * ‚»‚ÌŒãAƒ‚ƒfƒ‹‚Ì“à—e•¨‚ğæ‚Ù‚ÇƒLƒƒƒvƒ`ƒƒ‚µ‚½‰æ‘œ‚É‚µ‚ÄA©•ª‚ª•Ï‰»‚µ‚½‚Æ‘›‚¢‚¾uŠÔAMVC-1, MVC-2, MVC-3‚Ì‚·‚×‚Ä‚ÌƒEƒBƒ“ƒhƒE‚ªXV‚³‚ê‚éB         * ‚»‚µ‚ÄAƒ‚ƒfƒ‹‚Ì“à—e•¨‚ğnull‰»‚µ‚ÄA©•ª‚ª•Ï‰»‚µ‚½‚Æ‘›‚¬A‚·‚×‚Ä‚ÌƒEƒBƒ“ƒhƒE‚ª‹ó‚ÉXV‚³‚ê‚éB         * ‚±‚Ì‰ß’ö‚ğ‰½‰ñ‚©ŒJ‚è•Ô‚·‚±‚Æ‚ÅAMVC: Model-View-ControlleriObserverƒfƒUƒCƒ“ƒpƒ^[ƒ“j‚ª‚«‚¿‚ñ‚Æ“®‚¢‚Ä‚¢‚é‚©‚ğŠm‚©‚ß‚é—á‘èƒvƒƒOƒ‰ƒ€‚Å‚ ‚éB         * ƒoƒOi2010”N7Œ25“új         * —ÇDi2010”N7Œ25“új         */        public static void <a name="Example-main">main(String[] args)</a>        {                Dimension aDimension = Toolkit.getDefaultToolkit().getScreenSize();                Robot aRobot = null;                try                {                        aRobot = new Robot();                }                catch (Exception anException)                {                        System.err.println(anException);                        throw new RuntimeException(anException.toString());                }                BufferedImage anImage = aRobot.createScreenCapture(new Rectangle(aDimension));                                Model aModel = new Model();                                for (int index = 0; index &lt; 3; index++)                {                        View aView;                        JFrame aWindow;                        aView = new View(aModel);                        aWindow = new JFrame(&quot;MVC-&quot; + Integer.toString(index + 1));                        aWindow.getContentPane().add(aView);                        aWindow.setMinimumSize(new Dimension(400, 300));                        aWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                        aWindow.setSize(800, 600);                        aWindow.setLocation((200 + (index * 80)), (100 + (index * 60)));                        aWindow.setVisible(true);                }                                for (int index = 0; index &lt; 11; index++)                {                        try                        {                                Thread.sleep(1000);                        }                        catch (InterruptedException anException)                        {                                System.err.println(anException);                                throw new RuntimeException(anException.toString());                        }                        if (index % 2 == 0)                        {                                aModel.picture(anImage);                        }                        else                        {                                aModel.picture(null);                        }                        aModel.changed();                }                                return;        }}</pre><div class="belt"><h3><a name="Model" href="../TestSpecification/index.html#Model">Modeliƒ‚ƒfƒ‹j</a></h3></div><pre>package mvc;import java.awt.image.BufferedImage;import java.io.File;import java.util.ArrayList;import java.util.Iterator;/** * ƒ‚ƒfƒ‹B */public class Model extends Object{        /**         * ˆË‘¶•¨iObserverƒfƒUƒCƒ“ƒpƒ^[ƒ“‚ÌŠÏ‘ªÒjFView‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚½‚¿‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        protected ArrayList&lt;View&gt; dependents;        /**         * “à—e•¨‚Æ‚µ‚Ä‰æ‘œ‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        private BufferedImage picture;        /**         * ƒCƒ“ƒXƒ^ƒ“ƒX‚ğ¶¬‚µ‚Ä‰Šú‰»‚µ‚Ä‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public <a name="Model-Model">Model()</a>        {                super();                this.initialize();        }        /**         * w’è‚³‚ê‚½ƒrƒ…[‚ğˆË‘¶•¨‚Éİ’è‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Model-addDependent">addDependent(View aView)</a>        {                dependents.add(aView);                return;        }        /**         * ƒ‚ƒfƒ‹‚Ì“à•”ó‘Ô‚ª•Ï‰»‚µ‚Ä‚¢‚½‚Ì‚ÅA©•ª‚ÌˆË‘¶•¨‚Öupdate‚ÌƒƒbƒZ[ƒW‚ğ‘—M‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Model-changed">changed()</a>        {                Iterator anIterator = dependents.iterator();                while (anIterator.hasNext())                {                        View aView = (View)anIterator.next();                        aView.update();                }                return;        }        /**         * ‰Šú‰»‚·‚éB         * —ÇDi2010”N7Œ25“új         */        private void <a name="Model-initialize">initialize()</a>        {                dependents = new ArrayList&lt;View&gt;();                picture = null;                return;        }        /**         * ‰½‚à‚µ‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        public void <a name="Model-perform">perform()</a>        {                return;        }        /**         * ‰æ‘œiƒ‚ƒfƒ‹‚Ì“à—e•¨j‚ğ‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        protected BufferedImage <a name="Model-picture">picture()</a>        {                return picture;        }        /**         * ‰æ‘œiƒ‚ƒfƒ‹‚Ì“à—e•¨j‚ğİ’è‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Model-picture2">picture(BufferedImage anImage)</a>        {                picture = anImage;                return;        }        /**         * ‚±‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ•¶š—ñ‚É‚µ‚Ä‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public String <a name="Model-toString">toString()</a>        {                StringBuffer aBuffer = new StringBuffer();                Class aClass = this.getClass();                aBuffer.append(aClass.getName());                aBuffer.append(&quot;[picture=&quot;);                aBuffer.append(picture);                aBuffer.append(&quot;]&quot;);                return aBuffer.toString();        }}</pre><div class="belt"><h3><a name="View" href="../TestSpecification/index.html#View">Viewiƒrƒ…[j</a></h3></div><pre>package mvc;import java.awt.Point;import java.awt.Graphics;import java.awt.image.BufferedImage;import javax.swing.JPanel;import java.awt.Color;/** * ƒrƒ…[B */public class View extends JPanel{        /**         * î•ñ‚ğˆ¬‚Á‚Ä‚¢‚éModel‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ‘©”›‚·‚éB         * ‘©”›‚³‚ê‚éModel‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚Ípicture()‚Æ‚¢‚¤ƒƒbƒZ[ƒW‚É‰“š‚Å‚«‚È‚¯‚ê‚Î‚È‚ç‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        protected Model model;        /**         * §Œä‚ği‚éController‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        protected Controller controller;                /**         * ƒXƒNƒ[ƒ‹—Ê‚Æ‚µ‚ÄPoint‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        private Point offset;        /**         * ƒCƒ“ƒXƒ^ƒ“ƒX‚ğ¶¬‚µ‚Ä‰“š‚·‚éB         * w’è‚³‚ê‚½ƒ‚ƒfƒ‹‚ÌˆË‘¶•¨‚Æ‚È‚èAƒRƒ“ƒgƒ[ƒ‰‚ğì‚èAƒ‚ƒfƒ‹‚Æƒrƒ…[‚ğİ’è‚µAƒXƒNƒ[ƒ‹—Ê‚ğ(0, 0)‚Éİ’è‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public <a name="View-View">View(Model aModel)</a>        {                super();                model = aModel;                model.addDependent(this);                controller = new Controller();                controller.setModel(model);                controller.setView(this);                offset = new Point(0, 0);        }        /**         * ƒCƒ“ƒXƒ^ƒ“ƒX‚ğ¶¬‚µ‚Ä‰“š‚·‚éB         * w’è‚³‚ê‚½ƒ‚ƒfƒ‹‚ÌˆË‘¶•¨‚Æ‚È‚èAw’è‚³‚ê‚½ƒRƒ“ƒgƒ[ƒ‰‚Éƒ‚ƒfƒ‹‚Æƒrƒ…[‚ğİ’è‚µAƒXƒNƒ[ƒ‹—Ê‚ğ(0, 0)‚Éİ’è‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public <a name="View-View-View">View(Model aModel, Controller aController)</a>        {                super();                model = aModel;                model.addDependent(this);                controller = aController;                controller.setModel(model);                controller.setView(this);                offset = new Point(0, 0);        }        /**         * w’è‚³‚ê‚½ƒOƒ‰ƒtƒBƒNƒX‚É”wŒiFiŠDFj‚Åƒrƒ…[‘S‘Ì‚ğ“h‚èA‚»‚ÌŒã‚Éƒ‚ƒfƒ‹‚Ì“à—e•¨‚ğ•`‰æ‚·‚éB         * ‚»‚ê‚ÍƒXƒNƒ[ƒ‹—Êioffsetj‚ğl—¶‚µ‚Äƒ‚ƒfƒ‹‰æ‘œipicturej‚ğƒyƒCƒ“iƒpƒlƒ‹j“à‚É•`‰æ‚·‚é‚±‚Æ‚Å‚ ‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="View-paintComponent">paintComponent(Graphics aGraphics)</a>        {                int width = this.getWidth();                int height = this.getHeight();                aGraphics.setColor(Color.gray);                aGraphics.fillRect(0, 0, width, height);                if (model == null) { return; }                BufferedImage picture = model.picture();                if (picture == null) { return; }                aGraphics.drawImage(picture, offset.x, offset.y, null);                return;        }        /**         * ƒXƒNƒ[ƒ‹—Êioffset‚Ì‹tŒü‚«‚Ì‘å‚«‚³j‚ğ‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public Point <a name="View-scrollAmount">scrollAmount()</a>        {                int x = 0 - offset.x;                int y = 0 - offset.y;                return (new Point(x, y));        }        /**         * ƒXƒNƒ[ƒ‹—Ê‚ğw’è‚³‚ê‚½À•W•ª‚¾‚¯‘Š‘ÎƒXƒNƒ[ƒ‹‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="View-scrollBy">scrollBy(Point aPoint)</a>        {                int x = offset.x + aPoint.x;                int y = offset.y + aPoint.y;                this.scrollTo(new Point(x, y));                return;        }        /**         * ƒXƒNƒ[ƒ‹—Ê‚ğw’è‚³‚ê‚½À•W‚Éİ’èiâ‘ÎƒXƒNƒ[ƒ‹j‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="View-scrollTo">scrollTo(Point aPoint)</a>        {                offset = aPoint;                return;        }        /**         * ‚±‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ•¶š—ñ‚É‚µ‚Ä‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public String <a name="View-toString">toString()</a>        {                StringBuffer aBuffer = new StringBuffer();                Class aClass = this.getClass();                aBuffer.append(aClass.getName());                aBuffer.append(&quot;[model=&quot;);                aBuffer.append(model);                aBuffer.append(&quot;,offset=&quot;);                aBuffer.append(offset);                aBuffer.append(&quot;]&quot;);                return aBuffer.toString();        }        /**         * ƒrƒ…[‚Ì‘S—Ìˆæ‚ğÄ•`‰æ‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="View-update">update()</a>        {                this.repaint(0, 0, this.getWidth(), this.getHeight());                return;        }}</pre><div class="belt"><h3><a name="Controller" href="../TestSpecification/index.html#Controller">ControlleriƒRƒ“ƒgƒ[ƒ‰j</a></h3></div><pre>package mvc;import java.awt.Component;import java.awt.Cursor;import java.awt.Point;import java.awt.event.MouseEvent;import java.awt.event.MouseWheelEvent;import java.awt.event.MouseWheelListener;import javax.swing.event.MouseInputAdapter;/** * ƒRƒ“ƒgƒ[ƒ‰B */public class Controller extends MouseInputAdapter implements MouseWheelListener{        /**         * î•ñ‚ğˆ¬‚Á‚Ä‚¢‚éModel‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        protected Model model;                /**         * •\¦‚ği‚éView‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        protected View view;                /**         * ˆÈ‘O‚Éƒ}ƒEƒX‚Ìƒ{ƒ^ƒ“‚ª‰Ÿ‰º‚³‚ê‚½êŠ‚ğPoint‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚Æ‚µ‚Ä‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        private Point previous;                /**         * Œ»İ‚Éƒ}ƒEƒX‚Ìƒ{ƒ^ƒ“‚ª‰Ÿ‰º‚³‚ê‚½êŠ‚ğPoint‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚Æ‚µ‚Ä‘©”›‚·‚éB         * —ÇDi2010”N7Œ25“új         */        private Point current;        /**         * ƒCƒ“ƒXƒ^ƒ“ƒX‚ğ¶¬‚µ‚Ä‰“š‚·‚éB         * ‚·‚×‚Ä‚ÌƒCƒ“ƒXƒ^ƒ“ƒX•Ï”imodel, view, previous, currentj‚ğnull‰»‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public <a name="Controller-Controller">Controller()</a>        {                super();                model = null;                view = null;                previous = null;                current = null;        }        /**         * w’è‚³‚ê‚½ƒ}ƒEƒXƒCƒxƒ“ƒg‚©‚çƒ}ƒEƒXƒJ[ƒT‚ÌˆÊ’u‚ğŠl“¾‚µ‚ÄAƒ‚ƒfƒ‹À•WŒn‚Å‚ÌƒNƒŠƒbƒNˆÊ’u‚ğŠ„‚èo‚µ‚Ä•W€o—Í‚Éo—Í‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseClicked">mouseClicked(MouseEvent aMouseEvent)</a>        {                Point aPoint = aMouseEvent.getPoint();                aPoint.translate(view.scrollAmount().x, view.scrollAmount().y);                System.out.println(aPoint);                return;        }        /**         * ƒ}ƒEƒXƒJ[ƒT‚ÌŒ`ó‚ğˆÚ“®‚ÌŒ`‚É•Ï‰»‚³‚¹Aw’è‚³‚ê‚½ƒ}ƒEƒXƒCƒxƒ“ƒg‚©‚çƒ}ƒEƒXƒJ[ƒT‚ÌˆÊ’u‚ğŠl“¾‚µ‚ÄA         * ƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚Éİ’è‚·‚é‚Æ‹¤‚ÉAˆÈ‘O‚Ìƒ}ƒEƒXƒJ[ƒT‚ÌˆÊ’u‚©‚ç‚Ì·•ª‚ğŒvZ‚·‚éB         * ‚»‚µ‚ÄA‚»‚Ì·•ª‚¾‚¯ƒrƒ…[‚É‘Î‚µ‚ÄƒXƒNƒ[ƒ‹‚ğˆË—Š‚µA‚»‚ÌŒã‚Éƒrƒ…[‚ÌÄ•`‰æ‚ğˆË—Š‚·‚éB         * ÅŒã‚ÉƒCƒ“ƒXƒ^ƒ“ƒX•Ï”previous‚ğƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚ÉXV‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseDragged">mouseDragged(MouseEvent aMouseEvent)</a>        {                Cursor aCursor = Cursor.getPredefinedCursor(Cursor.MOVE_CURSOR);                Component aComponent = (Component)aMouseEvent.getSource();                aComponent.setCursor(aCursor);                current = aMouseEvent.getPoint();                int x = current.x - previous.x;                int y = current.y - previous.y;                Point point = new Point(x, y);                view.scrollBy(point);                view.repaint();                previous = current;                return;        }        /**         * ‰½‚à‚µ‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseEntered">mouseEntered(MouseEvent aMouseEvent)</a>        {                return;        }        /**         * ‰½‚à‚µ‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseExited">mouseExited(MouseEvent aMouseEvent)</a>        {                return;        }        /**         * ‰½‚à‚µ‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseMoved">mouseMoved(MouseEvent aMouseEvent)</a>        {                return;        }        /**         * ƒ}ƒEƒXƒJ[ƒT‚ÌŒ`ó‚ğ\š‚É•Ï‰»‚³‚¹Aw’è‚³‚ê‚½ƒ}ƒEƒXƒCƒxƒ“ƒg‚©‚çƒ}ƒEƒXƒJ[ƒT‚ÌˆÊ’u‚ğŠl“¾‚µ‚ÄA         * ƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚Éİ’è‚·‚é‹¤‚ÉƒCƒ“ƒXƒ^ƒ“ƒX•Ï”previous‚ğƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚ÉXV‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mousePressed">mousePressed(MouseEvent aMouseEvent)</a>        {                Cursor aCursor = Cursor.getPredefinedCursor(Cursor.CROSSHAIR_CURSOR);                Component aComponent = (Component)aMouseEvent.getSource();                aComponent.setCursor(aCursor);                current = aMouseEvent.getPoint();                previous = current;                return;        }        /**         * ƒ}ƒEƒXƒJ[ƒT‚ÌŒ`ó‚ğƒfƒtƒHƒ‹ƒg‚É–ß‚µAw’è‚³‚ê‚½ƒ}ƒEƒXƒCƒxƒ“ƒg‚©‚çƒ}ƒEƒXƒJ[ƒT‚ÌˆÊ’u‚ğŠl“¾‚µ‚ÄA         * ƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚Éİ’è‚·‚é‹¤‚ÉƒCƒ“ƒXƒ^ƒ“ƒX•Ï”previous‚ğƒCƒ“ƒXƒ^ƒ“ƒX•Ï”current‚ÉXV‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseReleased">mouseReleased(MouseEvent aMouseEvent)</a>        {                Cursor aCursor = Cursor.getDefaultCursor();                Component aComponent = (Component)aMouseEvent.getSource();                aComponent.setCursor(aCursor);                current = aMouseEvent.getPoint();                previous = current;                return;        }        /**         * ‰½‚à‚µ‚È‚¢B         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-mouseWheelMoved">mouseWheelMoved(MouseWheelEvent aMouseWheelEvent)</a>        {                return;        }        /**         * w’è‚³‚ê‚½ƒ‚ƒfƒ‹‚ğƒCƒ“ƒXƒ^ƒ“ƒX•Ï”model‚Éİ’è‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-setModel">setModel(Model aModel)</a>        {                model = aModel;                return;        }        /**         * w’è‚³‚ê‚½ƒrƒ…[‚ğƒCƒ“ƒXƒ^ƒ“ƒX•Ï”view‚Éİ’è‚µAƒrƒ…[‚Ìƒ}ƒEƒX‚ÌƒŠƒXƒi‚¨‚æ‚Ñƒ‚[ƒVƒ‡ƒ“ƒŠƒXƒi‚»‚µ‚ÄƒzƒC[ƒ‹ƒŠƒXƒi‚ğ‚±‚ÌƒRƒ“ƒgƒ[ƒ‰‚É‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public void <a name="Controller-setView">setView(View aView)</a>        {                view = aView;                view.addMouseListener(this);                view.addMouseMotionListener(this);                view.addMouseWheelListener(this);                return;        }        /**         * ‚±‚ÌƒCƒ“ƒXƒ^ƒ“ƒX‚ğ•¶š—ñ‚É‚µ‚Ä‰“š‚·‚éB         * —ÇDi2010”N7Œ25“új         */        public String <a name="Controller-toString">toString()</a>        {                StringBuffer aBuffer = new StringBuffer();                Class aClass = this.getClass();                aBuffer.append(aClass.getName());                aBuffer.append(&quot;[model=&quot;);                aBuffer.append(model);                aBuffer.append(&quot;,view=&quot;);                aBuffer.append(view);                aBuffer.append(&quot;]&quot;);                return aBuffer.toString();        }}</pre><div class="belt"><h3><a name="mvc.mf">mvc.mf</a>iƒ}ƒjƒtƒFƒXƒgƒtƒ@ƒCƒ‹j</h3></div><pre>Manifest-Version: 1.0Main-Class: mvc.Example</pre><div class="belt"><h3><a name="Makefile">Makefile</a>iƒƒCƒNƒtƒ@ƒCƒ‹j</h3></div><pre>ANT     = env LC_ALL=en antall:        $(ANT) allclean:        $(ANT) cleantest:        $(ANT) testinstall:        $(ANT) installdoc:        $(ANT) doczip:        $(ANT) zip</pre><div class="belt"><h3><a name="build.xml">build.xml</a>iƒrƒ‹ƒhƒtƒ@ƒCƒ‹j</h3></div><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project name=&quot;MVC&quot; default=&quot;all&quot; basedir=&quot;.&quot;&gt;  &lt;property name=&quot;package&quot; value=&quot;mvc&quot; /&gt;  &lt;property name=&quot;packagenames&quot; value=&quot;${package}&quot; /&gt;  &lt;property name=&quot;destdir&quot; value=&quot;./Classes&quot; /&gt;  &lt;property name=&quot;docdir&quot; value=&quot;./JavaDoc&quot; /&gt;  &lt;property name=&quot;instdir&quot; value=&quot;./${ant.project.name}.app/Contents/Resources/Java&quot; /&gt;  &lt;property name=&quot;copyright&quot; value=&quot;Copyright 2008-2011 AOKI Atsushi. All Right Reserved.&quot; /&gt;  &lt;property name=&quot;zipname&quot; value=&quot;${ant.project.name}&quot; /&gt;  &lt;tstamp&gt;    &lt;format property=&quot;date&quot; pattern=&quot;yyyy/MM/dd&quot; /&gt;    &lt;format property=&quot;time&quot; pattern=&quot;HH:mm:ss&quot; /&gt;  &lt;/tstamp&gt;  &lt;target name=&quot;all&quot; depends=&quot;jar&quot; description=&quot;build all&quot;&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;prepare&quot; depends=&quot;&quot; description=&quot;prepare to compile&quot;&gt;    &lt;mkdir dir=&quot;${destdir}&quot; /&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;compile&quot; depends=&quot;prepare&quot; description=&quot;compile all sources&quot;&gt;    &lt;javac      srcdir=&quot;${basedir}&quot;      destdir=&quot;${destdir}&quot;      includeAntRuntime=&quot;true&quot;       encoding=&quot;UTF-8&quot;      deprecation=&quot;on&quot;      verbose=&quot;false&quot;&gt;      &lt;compilerarg value=&quot;-Xlint:unchecked&quot; /&gt;      &lt;classpath&gt;        &lt;pathelement location=&quot;.&quot; /&gt;      &lt;/classpath&gt;    &lt;/javac&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;jar&quot; depends=&quot;compile&quot; description=&quot;make jar file&quot;&gt;    &lt;jar      jarfile=&quot;${package}.jar&quot;      basedir=&quot;${destdir}&quot;      manifest=&quot;${package}.mf&quot;&gt;    &lt;/jar&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;clean&quot; description=&quot;cleaning&quot;&gt;    &lt;delete dir=&quot;${destdir}&quot; /&gt;    &lt;delete file=&quot;${package}.jar&quot; /&gt;    &lt;delete dir=&quot;${docdir}&quot; /&gt;    &lt;delete dir=&quot;${instdir}&quot; /&gt;    &lt;delete file=&quot;../${zipname}.zip&quot; /&gt;    &lt;delete&gt;      &lt;fileset dir=&quot;${package}&quot; includes=&quot;*.class&quot; /&gt;    &lt;/delete&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;test&quot; depends=&quot;all&quot; description=&quot;test&quot;&gt;    &lt;exec executable=&quot;java&quot; spawn=&quot;false&quot;&gt;      &lt;arg line=&quot;-Xmx512m -Xss1024k -jar ${package}.jar&quot; /&gt;    &lt;/exec&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;install&quot; depends=&quot;all&quot; description=&quot;install into application&quot;&gt;    &lt;copy file=&quot;${package}.jar&quot; todir=&quot;${instdir}&quot;/&gt;    &lt;exec executable=&quot;chmod&quot;&gt;      &lt;arg line=&quot;755 ${instdir}/../../MacOS/applet&quot; /&gt;    &lt;/exec&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;doc&quot; depends=&quot;all&quot; description=&quot;make document (javadoc)&quot;&gt;    &lt;mkdir dir=&quot;${docdir}&quot; /&gt;    &lt;javadoc      locale=&quot;en_US&quot;      sourcepath=&quot;${basedir}&quot;      destdir=&quot;${docdir}&quot;      packagenames=&quot;${packagenames}&quot;      author=&quot;true&quot;      version=&quot;true&quot;      charset=&quot;UTF-8&quot;      encoding=&quot;UTF-8&quot;      docencoding=&quot;UTF-8&quot;      access=&quot;private&quot;&gt;      &lt;doctitle&gt;${doc-title}&lt;/doctitle&gt;      &lt;bottom&gt;${copyright}&lt;/bottom&gt;    &lt;/javadoc&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;  &lt;target name=&quot;zip&quot; depends=&quot;clean&quot; description=&quot;make zip file&quot;&gt;    &lt;delete file=&quot;../${zipname}.zip&quot; /&gt;    &lt;zip destfile=&quot;../${zipname}.zip&quot;&gt;      &lt;zipfileset dir=&quot;.&quot; prefix=&quot;${zipname}&quot; /&gt;    &lt;/zip&gt;    &lt;echo&gt;on ${date} at ${time}&lt;/echo&gt;  &lt;/target&gt;&lt;/project&gt;</pre><div class="belt"><h3><a name="Makefile.old">Makefile.old</a>iŒÃ‚¢ƒƒCƒNƒtƒ@ƒCƒ‹j</h3></div><pre>PACKAGE	= mvcZIPNAME	= MVCINSTDIR	= MVC.app/Contents/Resources/JavaDESTDIR	= ClassesJAVAC	= env LC_ALL=en javac -encoding UTF-8 -deprecation -Xlint:uncheckedCPATH	= -classpath .JAVA	= java -Xmx512m -Xss1024k -jarJAVADOC	= env LC_ALL=en javadoc -charset UTF-8 -encoding UTF-8 -docencoding UTF-8 -privateJDOCDIR	= JavaDocCLASSES	= €	$(PACKAGE)/Example.class €	$(PACKAGE)/Model.class €	$(PACKAGE)/View.class €	$(PACKAGE)/Controller.classall: $(PACKAGE).jar$(PACKAGE).jar: $(CLASSES)	if [ ! -e $(DESTDIR)/$(PACKAGE) ] ; then mkdir -p $(DESTDIR)/$(PACKAGE) ; fi	cp -p $(PACKAGE)/*.class $(DESTDIR)/$(PACKAGE)	if [ -e $(DESTDIR)/META-INF ] ; then rm -rf $(DESTDIR)/META-INF ; fi	(cd $(DESTDIR) ; jar cfm ../$(PACKAGE).jar ../$(PACKAGE).mf . )%.class: %.java	$(JAVAC) $(CPATH) $&lt;clean:	rm -f $(PACKAGE)/*.class $(PACKAGE).jar ../$(ZIPNAME).zip	if [ -e $(INSTDIR) ] ; then rm -f -r $(INSTDIR) ; fi	rm -rf ${JDOCDIR}test: all	$(JAVA) $(PACKAGE).jarinstall: all	if [ ! -e $(INSTDIR) ] ; then mkdir $(INSTDIR) ; fi	cp -p $(PACKAGE).jar $(INSTDIR)	chmod 755 $(INSTDIR)/../../MacOS/appletdoc: all	${JAVADOC} -d ${JDOCDIR} $(PACKAGE)/*.javazip: javadoc clean	(cd .. ; zip -r $(ZIPNAME).zip $(ZIPNAME)/)</pre><hr><div class="right-small">Copyright 2009-2011 Project Aoki, Updated: 2011/02/27 (Created: 2009/11/11)</div></body></html>