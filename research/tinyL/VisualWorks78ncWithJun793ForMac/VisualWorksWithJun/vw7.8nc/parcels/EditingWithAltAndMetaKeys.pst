<?xml version="1.0"?><st-source><!-- Name: EditingWithAltAndMetaKeysNotice: Copyright © 2010-1999 Cincom Systems, Inc.  All Rights Reserved.Comment: This package restores various alt-key and meta-key combinations to TextEditors, that existed in VisualWorks 7.6 and previous versions.DbIdentifier: bear73DbTrace: 287656PackageName: EditingWithAltAndMetaKeysParcel: #('EditingWithAltAndMetaKeys')PrintStringCache: (7.7.1 - 1,trobinson)Version: 7.7.1 - 1Date: 10:56:24 AM June 11, 2010 --><time-stamp>From VisualWorks®, Pre-Release 7.7.1 (jun10.5) of June 11, 2010 on June 11, 2010 at 10:56:24 AM</time-stamp><do-it>(Dialog confirm: 'You are filing-in a Parcel source file!\\While this is possible it will not have\the same effect as loading the parcel.\None of the Parcel''s prerequisites will\be loaded and none of its load actions\will be performed.\\Are you sure you want to file-in?' withCRs) ifFalse: [self error: 'Parcel file-in abandoned.  Choose terminate or close.']</do-it><methods><class-id>UI.ParagraphEditor</class-id> <category>editing-functions</category><body package="EditingWithAltAndMetaKeys" selector="altCharacterKey:">altCharacterKey: aChar 	"If 'alt' is held down, do a special function, otherwise, insert the character into the stream. 	'Alt' means the 'command' key on the Macintosh."	"ScheduledControllers activeController sensor keyboardEvent"	| cValue |	aChar hasAlt ifFalse: [^self normalCharacterKey: aChar].	cValue := aChar keyValue asLowercase.	(self altKeys includesKey: cValue)		ifFalse: [^self normalCharacterKey: aChar].	^self perform: (self altKeys at: cValue)		with: aChar</body></methods><methods><class-id>UI.ParagraphEditor</class-id> <category>accessing</category><body package="EditingWithAltAndMetaKeys" selector="altKeys">altKeys	^self feelPolicy altKeys</body></methods><methods><class-id>UI.ParagraphEditor</class-id> <category>editing-functions</category><body package="EditingWithAltAndMetaKeys" selector="metaCharacterKey:">metaCharacterKey: aChar	"If 'meta' is held down, do a special function, otherwise, insert the character into the stream. 	'Meta' means 'option' on the Macintosh."	| cValue |	aChar hasAlt		ifFalse: [^self normalCharacterKey: aChar].	cValue := aChar keyValue.	(self metaKeys includesKey: cValue)		ifFalse: [^self normalCharacterKey: aChar].	^self perform: (self metaKeys at: cValue) with: aChar</body></methods><methods><class-id>UI.ParagraphEditor</class-id> <category>accessing</category><body package="EditingWithAltAndMetaKeys" selector="metaKeys">metaKeys	^self feelPolicy metaKeys</body></methods><methods><class-id>UI.UIFeelPolicy</class-id> <category>keyboard Bindings</category><body package="EditingWithAltAndMetaKeys" selector="altEditKeys">altEditKeys	"Add the default Macintosh/Win95 key maps to the 'AltKeys' dictionary	(for 'command' editing keys on the mac, 'alt' on all other platforms)."	| a |	a := self altKeys.	self supportsCodeEditing		ifTrue: 			[a at: $t put: #displayIfTrueKey:.			a at: $f put: #displayIfFalseKey:.			a at: $g put: #displayColonEqualKey:.			a at: $d put: #doItOrDisplayDateKey:.			a at: $p put: #printItKey:.			a at: $q put: #inspectItKey:.			a at: $b put: #debugItKey:.			a at: $e put: #explainKey:]		ifFalse: 			[a at: $f put: #findDialogKey:.			a at: $g put: #findAgainKey:.			a at: $d put: #displayDateKey:].	a at: $s put: #acceptKey:.	a at: $a put: #selectAllKey:.	a at: $l put: #findKey:.	a at: $r put: #replaceKey:.	a at: $x put: #cutKey:.	a at: $c put: #copyKey:.	a at: $v put: #pasteKey:.	a at: $z put: #undoKey:.	a at: $j put: #selectCurrentTypeInKey:.	self ensureAltProcessingForAlphabeticKeys</body><body package="EditingWithAltAndMetaKeys" selector="ensureAltProcessingForAlphabeticKeys">ensureAltProcessingForAlphabeticKeys	| dispatchTable makeAltKey |	dispatchTable := self keyboard.	makeAltKey := [:code | dispatchTable bindValue: #altCharacterKey: to: (Character value: code)].	$A asInteger to: $Z asInteger do: makeAltKey.	$a asInteger to: $z asInteger do: makeAltKey</body></methods><methods><class-id>UI.UIFeelPolicy</class-id> <category>initialize</category><body package="EditingWithAltAndMetaKeys" selector="initialize">initialize	self keyboardDispatchTable.	self altEditKeys.	self metaEditKeys</body></methods><methods><class-id>UI.UIFeelPolicy</class-id> <category>keyboard Bindings</category><body package="EditingWithAltAndMetaKeys" selector="metaEditKeys">metaEditKeys	"Add the default Macintosh/Win95 key maps to the 'self metaKeys' dictionary.	(for 'option' editing keys on the mac)."	self metaKeys at: $x put: #cutKey:.	"cut"	self metaKeys at: $c put: #copyKey:.	"copy"	self metaKeys at: $v put: #pasteKey:.	"paste"	self metaKeys at: $z put: #undoKey:.	"undo"	self keyboard bindValue: #metaCharacterKey: to: $x.	"cut"	self keyboard bindValue: #metaCharacterKey: to: $c.	"copy"	self keyboard bindValue: #metaCharacterKey: to: $v.	"paste"	self keyboard bindValue: #metaCharacterKey: to: $V.	"paste from buffer"	self keyboard bindValue: #metaCharacterKey: to: $z.	"undo"	self keyboard bindValue: #metaCharacterKey: to: $l	"find"</body></methods><do-it>"Imported Classes:"</do-it><do-it>self error: 'Attempting to file-in parcel imports.  Choose terminate or close'</do-it><class><name>UIFeelPolicy</name><environment>UI</environment><super>Core.Object</super><private>false</private><indexed-type>none</indexed-type><inst-vars>altKeys keyboard metaKeys supportsCodeEditing </inst-vars><class-inst-vars></class-inst-vars><imports>			private Graphics.TextConstants.*			</imports><category>UIBuilder-Support</category><attributes><package>UIBuilder-Support</package></attributes></class><class><name>ParagraphEditor</name><environment>UI</environment><super>UI.ControllerWithMenu</super><private>false</private><indexed-type>none</indexed-type><inst-vars>beginTypeInIndex anchorIndex emphasisHere dispatchTable charComposer textHasChanged feelPolicy supportCodeEditingFeels localMenuItems extendingDown </inst-vars><class-inst-vars></class-inst-vars><imports>			private Graphics.TextConstants.*			</imports><category>UIBasics-Support</category><attributes><package>UIBasics-Support</package></attributes></class></st-source>